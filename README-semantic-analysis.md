# 即時語意分析引擎 - 後端測試頁面

## 檔案說明

- **semantic-analysis-demo.html** - 獨立的語意分析引擎展示頁面，供後端人員測試使用

## 功能說明

此頁面提供完整的語意分析引擎功能展示，包含：

### 1. 實體提取
- 從使用者輸入中提取關鍵實體
- 支援5大類別：就業狀態、家庭背景、職業背景、地點、補助需求

### 2. 語意推論
- 根據提取的實體推論使用者特徵
- 6條推論規則
- 信心度計算（0-100%）

### 3. 使用者檔案建構
- 累積對話歷史
- 結構化使用者檔案
- 即時更新

### 4. 視覺化展示
- 即時推論日誌
- 使用者檔案顯示
- JSON 格式輸出

## 使用方式

1. 直接在瀏覽器開啟 `semantic-analysis-demo.html`
2. 在左側輸入框輸入測試文字
3. 或點擊快速測試案例按鈕
4. 右側會即時顯示分析結果

## 快速測試案例

頁面內建以下測試案例：

1. "你好,我之前失業,本來是一名網路工程師,想轉行當程式設計師"
2. "好的,請問有哪些課程?我有一個兒子讀國中,一個女兒讀小學,太太沒有上班,請問是否有補助?"
3. "我想學咖啡拉花,請問有補助嗎?"
4. "我是設計師,想學UI/UX設計"

## API 說明

### 核心函數

#### `extractEntities(text, entityDictionaries)`
提取文字中的實體

**參數：**
- `text` (string): 使用者輸入文字
- `entityDictionaries` (object): 實體詞典（可選，預設使用內建詞典）

**返回：**
```javascript
[
  {
    text: "失業",
    category: "就業狀態",
    tag: "待業中",
    position: 5
  }
]
```

#### `inferUserProfile(entities, context, currentProfile)`
根據實體推論使用者特徵

**參數：**
- `entities` (array): 提取的實體列表
- `context` (string): 原始文字上下文
- `currentProfile` (object): 當前使用者檔案（可選）

**返回：**
```javascript
[
  {
    category: "就業狀態",
    tag: "狀態:待業中",
    confidence: 99,
    reason: "明確提及失業相關詞彙",
    timestamp: "2024-01-01T12:00:00.000Z",
    sourceEntities: [...]
  }
]
```

#### `updateUserProfile(profile, inferences)`
更新使用者檔案

**參數：**
- `profile` (object): 當前使用者檔案
- `inferences` (array): 推論結果列表

**返回：**
```javascript
{
  employmentStatus: {
    value: "狀態:待業中",
    confidence: 99,
    sources: [...]
  },
  familyBackground: {...},
  careerBackground: {...},
  locationPreference: {...},
  subsidyNeed: {...},
  conversationHistory: [...]
}
```

#### `analyzeUserInput(userInput, currentProfile)`
整合分析流程

**參數：**
- `userInput` (string): 使用者輸入
- `currentProfile` (object): 當前使用者檔案（可選）

**返回：**
```javascript
{
  entities: [...],
  inferences: [...],
  updatedProfile: {...}
}
```

## 推論規則說明

### 規則1: 失業/待業推論
- **觸發條件：** 提到"失業"、"待業"、"找工作"等
- **推論結果：** 就業狀態:待業中
- **信心度：** 99%

### 規則2: 有子女推論
- **觸發條件：** 提到"兒子"、"女兒"、"小孩"等
- **推論結果：** 家庭背景:有子女
- **信心度：** 98%

### 規則3: 已婚推論
- **觸發條件：** 提到"太太"、"先生"、"配偶"等
- **推論結果：** 就業狀態:已婚(推論)
- **信心度：** 85%

### 規則4: 負面上下文推論
- **觸發條件：** 提到"上班"但上下文包含"沒有"、"沒"等負面詞
- **推論結果：** 就業狀態:待業中
- **信心度：** 95%

### 規則5: 補助需求推論
- **觸發條件：** 提到"補助"、"補貼"、"免費"等
- **推論結果：** 補助需求:需要補助
- **信心度：** 90%

### 規則6: 職業興趣推論
- **觸發條件：** 提到職業相關關鍵字
- **推論結果：** 職業背景:興趣領域:[領域名稱]
- **信心度：** 85%

## 實體詞典結構

### 就業狀態
- 待業中: ["失業", "待業", "找工作", ...]
- 在職中: ["上班", "工作", "就業", ...]
- 學生: ["學生", "就讀", "上學", ...]

### 家庭背景
- 有子女: ["兒子", "女兒", "小孩", ...]
- 已婚: ["太太", "先生", "配偶", ...]
- 單親: ["單親", "離婚", "分居"]
- 有長輩: ["父母", "長輩", "照顧", ...]

### 職業背景
- 資訊科技: ["工程師", "程式", "軟體", ...]
- 餐飲: ["餐飲", "咖啡", "烘焙", ...]
- 設計: ["設計", "UI", "UX", ...]
- 商業: ["行銷", "管理", "商業", ...]
- 維修: ["維修", "機械", "PLC", ...]
- 語言: ["英文", "日文", "語言", ...]
- 醫療: ["醫療", "照護", "長照", ...]

### 地點
- 台北: ["台北", "北市", "Taipei", ...]
- 新北: ["新北", "板橋", "新店", ...]
- 台中: ["台中", "中市", "Taichung", ...]
- 高雄: ["高雄", "高市", "Kaohsiung", ...]
- 桃園: ["桃園", "桃市", "桃園市"]
- 台南: ["台南", "南市", "台南市"]
- 線上: ["線上", "直播", "遠距", ...]

### 補助需求
- 需要補助: ["補助", "補貼", "津貼", ...]
- 經濟困難: ["經濟", "困難", "沒錢", ...]

## 技術架構

- **前端框架：** React 18 (ESM)
- **樣式：** Tailwind CSS (CDN)
- **運行方式：** 純 HTML，無需建置流程
- **瀏覽器支援：** 現代瀏覽器（支援 ES Modules）

## 注意事項

1. 此頁面為獨立展示頁面，不依賴專案其他檔案
2. 所有邏輯都在單一 HTML 檔案中
3. 使用 CDN 載入 React，需要網路連線
4. 適合後端人員測試 API 功能和推論邏輯

## 擴展建議

如需整合到後端 API，可以：

1. 將核心函數提取為 Node.js 模組
2. 建立 RESTful API 端點
3. 支援批次處理
4. 加入快取機制
5. 記錄分析日誌

